{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Debug cropdroid config",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "remotePath": "",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "args": ["config", "--debug", "--init", "--datastore=cockroach"],
            "showLog": true
        }, {
            "name": "Debug CropDroid Standlone (sqlite)",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "remotePath": "",
            "port": 2345,
            "host": "127.0.0.1",
            "preLaunchTask": "initsqlite",
            "program": "${workspaceRoot}",
            "args": ["standalone", "--debug", "--ssl=false", "--port=8091", "--enable-registrations", "--datastore=sqlite"],
            "showLog": true
        },
        {
            "name": "Debug CropDroid Standlone (memory)",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "remotePath": "",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "args": ["standalone", "--debug", "--ssl=false", "--port=8091", "--enable-registrations"],
            "showLog": true
        },
        {
            "name": "Debug CropDroid",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "remotePath": "",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "buildFlags": "-tags=cluster",
            "env": {
                "CGO_CFLAGS": "-I/home/jhahn/sources/rocksdb/include",
                "CGO_LDFLAGS": "-L/home/jhahn/sources/rocksdb -lrocksdb -lstdc++ -lm -lz -lbz2 -lsnappy -llz4 -lzstd -ldl"
            },
            "args": ["cluster", "--debug", "--config-dir=./test", "--data-dir=./db/cluster", "--log-dir=/var/log/cropdroid/cluster", "--keys=keys",
                "--ssl=false", "--port=8093", "--datastore=cockroach", "--node-id=3", "--enable-registrations"],
            "showLog": true
        },
        {
            "name": "Debug CropDroid Cluster (Node1 :: Pebble)",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "remotePath": "",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "buildFlags": "-tags=cluster,pebble",
            "args": ["cluster", "--debug", "--config-dir=./test", "--data-dir=./db/cluster",
                "--log-dir=/var/log/cropdroid/cluster",
                "--log-file=/var/log/cropdroid/cluster/node-1.log",
                "--keys=keys",
                "--ssl=false", 
                "--port=8091",
                "--datastore=cockroach",
                "--device-store=raft",
                "--enable-registrations",
                "--listen=192.168.0.71",
                "--raft=192.168.0.71:60020,192.168.0.71:60021,192.168.0.71:60022"],
            "showLog": true
        },
        {
            "name": "Debug CropDroid Cluster (Pebble)",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "remotePath": "",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "buildFlags": "-tags=cluster,pebble",
            "args": ["cluster", "--debug", "--config-dir=./test", "--data-dir=./db/cluster",
                "--log-dir=/var/log/cropdroid/cluster",
                "--log-file=/var/log/cropdroid/cluster/node-3.log",
                "--keys=keys",
                "--ssl=false", 
                "--port=8093",
                "--datastore=cockroach",
                "--device-store=raft",
                "--enable-registrations",
                "--listen=192.168.0.71",
                "--gossip-peers=192.168.0.71:60010,192.168.0.71:60011",
                "--gossip-port=60012",
                "--raft=192.168.0.71:60020,192.168.0.71:60021,192.168.0.71:60022",
                "--raft-port=60022",
                "--raft-leader-id=3"],
            "showLog": true
        },
        {
            "name": "Debug CropDroid Cluster :: Add Node",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "remotePath": "",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "buildFlags": "-tags=cluster",
            "env": {
                "CGO_CFLAGS": "-I/home/jhahn/sources/rocksdb/include",
                "CGO_LDFLAGS": "-L/home/jhahn/sources/rocksdb -lrocksdb -lstdc++ -lm -lz -lbz2 -lsnappy -llz4 -lzstd -ldl"
            },
            "args": ["cluster", "--debug", "--config-dir=./test", "--data-dir=./db/cluster", 
                "--log-dir=/var/log/cropdroid/cluster",
                "--log-file=/var/log/cropdroid/cluster/node-4.log",
                "--keys=keys",
                "--join=true",
                "--ssl=false", 
                "--port=8094",
                "--datastore=cockroach",
                "--enable-registrations",
                "--listen=192.168.0.71",
                "--gossip-peers=192.168.0.71:60010,192.168.0.71:60011,192.168.0.71:60012",
                "--gossip-port=60013",
                "--raft-port=60023"],
            "showLog": true
        },
        {
            "name": "Debug Cockroach SSL",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "remotePath": "",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "buildFlags": "-tags=cluster,pebble",
            "args": ["cluster", "--debug", 
                "--config-dir=./test",
                "--data-dir=./db/cluster",
                "--log-dir=/var/log/cropdroid/cluster",
                "--log-file=/var/log/cropdroid/cluster/node-3.log",
                "--keys=keys",
                "--ssl=false", 
                "--port=8093",
                "--datastore=cockroach",
                "--datastore-user=root",
                "--datastore-ca-cert=keys/cockroachdb-node-ca.crt",
                "--datastore-tls-key=keys/cockroachdb-root.key",
                "--datastore-tls-cert=keys/cockroachdb-root.crt",
                "--enable-registrations",
                "--listen=192.168.0.71",
                "--gossip-peers=192.168.0.71:60010,192.168.0.71:60011",
                "--gossip-port=60012",
                "--raft=192.168.0.71:60020,192.168.0.71:60021,192.168.0.71:60022",
                "--raft-port=60022"],
            "showLog": true
        },
        {
            "name": "Remote Debug Session",
            "type": "go",
            "request": "attach",
            "mode": "remote",
            "port": 56268,
            "host": "127.0.0.1",
            "remotePath": "/usr/local/bin/cropdroid",
            "cwd": "${workspaceFolder}",
            "buildFlags": "-tags='cluster,pebble'",
            "showLog": true,
            "trace": "log",
            "logOutput": "rpc"
        }
    ]
}
