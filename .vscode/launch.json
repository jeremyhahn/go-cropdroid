{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Debug cropdroid config init (sqlite)",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "args": ["config", "--debug", "--init", "--enable-default-farm", "--datastore=sqlite"],
            "showLog": true,
            "debugAdapter": "legacy"
        }, 
        {
            "name": "Debug ca --issue test.com",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "args": ["ca", "--issue", "test.com"],
            "showLog": true,
            "debugAdapter": "legacy"
        },
        {
            "name": "Debug cropdroid config show",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "args": ["config", "--debug", "--show"],
            "showLog": true,
            "debugAdapter": "legacy"
        }, {
            "name": "Debug cropdroid encrypt argon2",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "args": ["encrypt", "--debug", "--argon2", "--data=password"],
            "showLog": true,
            "debugAdapter": "legacy"
        }, {
            "name": "Debug cropdroid config (cockroachdb)",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "args": ["config", "--debug", "--init", "--datastore=cockroach"],
            "showLog": true,
            "debugAdapter": "legacy"
        }, {
            "name": "Debug CropDroid Standlone (sqlite memory)",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "args": ["standalone", "--debug", "--init", "--web-port=8080", "--web-tls-port=8443", "--enable-registrations"],
            //"args": ["standalone", "--debug", "--init", "--ssl=false", "--port=8091", "--enable-registrations"],
            "showLog": true,
            "debugAdapter": "legacy"
        }, {
            "name": "Debug CropDroid Standlone (sqlite with --init)",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "port": 2345,
            "host": "127.0.0.1",
            "preLaunchTask": "rmsqlite",
            "program": "${workspaceRoot}",
            "args": ["standalone", "--debug", "--init", "--web-port=8080", "--web-tls-port=8443", "--enable-registrations", "--datastore=sqlite"],
            "showLog": true,
            "debugAdapter": "legacy"
        }, {
            "name": "Debug CropDroid Standlone (sqlite without --init)",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "port": 2345,
            "host": "127.0.0.1",
            //"preLaunchTasks": ["buildStandalone", "initsqlite"],
            "preLaunchTask": "rmsqlite",
            "program": "${workspaceRoot}",
            "args": ["standalone", "--debug", "--web-port=8080", "--web-tls-port=8443", "--enable-registrations", "--datastore=sqlite"],
            "showLog": true,
            "debugAdapter": "legacy"
        }, {
            "name": "Debug CropDroid",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "buildFlags": "-tags=cluster",
            "env": {
                "CGO_CFLAGS": "-I/home/jhahn/sources/rocksdb/include",
                "CGO_LDFLAGS": "-L/home/jhahn/sources/rocksdb -lrocksdb -lstdc++ -lm -lz -lbz2 -lsnappy -llz4 -lzstd -ldl"
            },
            "args": ["cluster", "--debug", "--config-dir=./test", "--data-dir=./db/cluster", "--log-dir=/var/log/cropdroid/cluster", "--keys=keys",
                "--ssl=false", "--port=8093", "--datastore=cockroach", "--node-id=3", "--enable-registrations"],
            "showLog": true,
            "debugAdapter": "legacy"
        },
        {
            "name": "Debug CropDroid Cluster (Node1)",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "buildFlags": "-tags=cluster,pebble",
            "args": ["cluster", "--debug", "--config-dir=./test", "--data-dir=./db/cluster",
                "--log-dir=/var/log/cropdroid/cluster",
                "--log-file=/var/log/cropdroid/cluster/node-1.log",
                "--keys=keys",
                "--web-port=8091",
                "--web-tls-port=8443",
                "--data-store=raft",
                "--enable-registrations",
                "--listen=192.168.1.20",
                "--raft=192.168.1.20:60020,192.168.1.20:60021,192.168.1.20:60022"],
            "showLog": true,
            "debugAdapter": "legacy"
        },
        {
            "name": "Debug CropDroid Cluster (Node3)",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "buildFlags": "-tags=cluster,pebble",
            "args": ["cluster", "--debug",
                "--config-dir=./test",
                "--data-dir=./db/cluster",
                "--log-dir=/var/log/cropdroid/cluster",
                "--log-file=/var/log/cropdroid/cluster/node-3.log",
                "--init=true",
                "--keys=keys",
                "--web-port=8091",
                "--web-tls-port=8443",
                "--data-store=raft",
                "--enable-registrations",
                "--listen=192.168.1.20",
                "--gossip-peers=192.168.1.20:60010,192.168.1.20:60011",
                "--gossip-port=60012",
                "--raft=192.168.1.20:60020,192.168.1.20:60021,192.168.1.20:60022",
                "--raft-port=60022",
                "--raft-leader-id=3"],
            "showLog": true,
            "debugAdapter": "legacy"
        },
        {
            "name": "Debug CropDroid Cluster :: Add Node",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${workspaceRoot}",
            "buildFlags": "-tags=cluster",
            "env": {
                "CGO_CFLAGS": "-I/home/jhahn/sources/rocksdb/include",
                "CGO_LDFLAGS": "-L/home/jhahn/sources/rocksdb -lrocksdb -lstdc++ -lm -lz -lbz2 -lsnappy -llz4 -lzstd -ldl"
            },
            "args": ["cluster", "--debug", "--config-dir=./test", "--data-dir=./db/cluster", 
                "--log-dir=/var/log/cropdroid/cluster",
                "--log-file=/var/log/cropdroid/cluster/node-4.log",
                "--keys=keys",
                "--join=true",
                "--web-port=8091",
                "--web-tls-port=8443",
                "--datastore=cockroach",
                "--enable-registrations",
                "--listen=192.168.1.20",
                "--gossip-peers=192.168.1.20:60010,192.168.1.20:60011,192.168.1.20:60012",
                "--gossip-port=60013",
                "--raft-port=60023"],
            "showLog": true,
            "debugAdapter": "legacy"
        },
        {
            "name": "Remote Debug Session",
            "type": "go",
            "request": "attach",
            "mode": "remote",
            "port": 56268,
            "host": "127.0.0.1",
            "remotePath": "/usr/local/bin/cropdroid",
            "cwd": "${workspaceFolder}",
            "showLog": true,
            "trace": "log",
            "logOutput": "rpc"
        },
        {
            "name": "Remote Debug (cropdroid1)",
            "type": "go",
            "request": "attach",
            "mode": "remote",
            "port": 40000,
            "host": "cropdroid1",
            "remotePath": "/usr/local/bin/cropdroid",
            "cwd": "${workspaceFolder}",
            "showLog": true,
            "trace": "log",
            "logOutput": "rpc"
        }
    ]
}
